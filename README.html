<h1>MultiplEYE WG1: Experiment Implementation</h1>
<p>This repository contains the code for a MultiplEYE eye-tracking-while-reading experiment for multiple languages.
After you have read this README make sure to read the relevant files in the guidelines folder. There exists a MARKDOWN
and a HTML version of the guidelines. Both are exactly the same. You can read whatever format you prefer. Also for this README,
there exist two versions.</p>
<p>If you would like to contribute, please read the following guidelines: <a href="guidelines/html/CONTRIBUTING.html">CONTRIBUTING.html</a> and
contact <a href="mailto:multipleye@cl.uzh.ch">multipleye@cl.uzh.ch</a>.</p>
<h2>Contents</h2>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#run-the-dummy-experiment">Run the experiment without an eye-tracker</a></li>
<li><a href="#the-result-files">The result files</a></li>
<li><a href="#run-the-experiment-with-an-eye-tracker">Run the experiment with an eye-tracker</a></li>
</ul>
<h2>Installation</h2>
<p>In order to run the MultiplEYE experiment you will need to complete the following steps</p>
<ol>
<li>Please read the official MultiplEYE guidelines linked on this page: <a href="https://multipleye.eu/contribute/">MultiplEYE contribute</a></li>
<li>Download the experiment code from this repository. Either clone via git or download the zip file (see <a href="#download-the-experiment-code-as-zip-file">download as zip</a>).</li>
<li>Following the guidelines, prepare the stimulus files which includes the creation of the images</li>
<li>Copy the stimulus files to the correct location in the experiment data folder: <code>experiment_implementation/data/[your stimulus folder]</code></li>
<li>Prepare the environment for the experiment following the guidelines in <a href="guidelines/html/CONDA_ENVIRONMENT.html">CONDA_ENVIRONMENT.html</a></li>
<li>Install the necessary packages for your eye-tracker. For EyeLink eye-trackers
<a href="guidelines/html/INSTALL_PYLINK.html">INSTALL_PYLINK.html</a>. For Tobii eye-trackers, please see <a href="#develop-and-run-experiments-for-tobii">develop for Tobii</a> further below.</li>
<li><a href="#run-the-dummy-experiment">Run the dummy experiment</a> to check if everything is working correctly</li>
<li><a href="#run-the-experiment-with-an-eye-tracker">Run the experiment with an eye-tracker</a></li>
</ol>
<h3>Download the experiment code as zip file</h3>
<p>If you do not have git installed, you can download the code as a zip file from this website.
Click on the green button <code>Code</code> and then click on <code>Download ZIP</code>. Unzip the folder in our preferred location.</p>
<blockquote>
<p>Note: The repository contains a folder with toy stimuli to test the experiment. Sometimes you cannot unzip these files because the path gets too long.
In this case, you can either move the folder to a different location closer to the root or unzip and ignore the files
in the toy stimuli folder (i.e. skip the error message that pops up during unzipping). To use the
toy stimuli, please contact <a href="mailto:multipleye@cl.uzh.ch">multipleye@cl.uzh.ch</a> and we can provide them and you can
copy them to the correct location.</p>
</blockquote>
<p><img src="guidelines/images/download-as-zip.png" alt="Download" /></p>
<h2>Run the dummy experiment</h2>
<p>The experiment can be run in dummy mode which means that can be run without an actual eye-tracker.
If you'd like to run it, make sure you have completed the above steps, and you have your conda environment activated.</p>
<p>To be sure that you are running the dummy version, activate the environment:</p>
<pre><code class="language-bash">conda activate multipleye3.9
</code></pre>
<p>Then you can navigate to the root folder of your local clone of the repository (your path should now end with
<code>wg1-experiment-implementation</code>. Please find instructions on how to navigate in a terminal in the
<a href="guidelines/html/CONDA_ENVIRONMENT.html">CONDA_ENVIRONMENT.html</a> in section 4). Run the following command to run the dummy experiment:</p>
<pre><code class="language-bash">python experiment_implementation/start_multipleye_session.py
</code></pre>
<p>In the GUI that will pop up you can tick the box <code>Dummy version</code> to run the experiment in dummy mode.</p>
<h2>The result files</h2>
<p>The experiment will write log and data files to a newly created results folder for your language and country
in the data folder (<code>data/eye_tracking_data...</code>).
In there it will create a folder depending on the experiment type. For example, if you run the test session,
it will create a folder called <code>test_dataset</code>. Within those
folders it will simply create a new folder for each participant. The folder name is the participant ID
(three-digit number). If you run the
script for the core dataset, it will prevent you from running the experiment twice for the same participant.
Note that if you run a test session, it will not warn you if you enter the same participant ID more than once. It will
just write the files to the same folder.</p>
<p>The naming scheme of the log files is a follows:
<code>[log_file_type]_[session_id]_[participant_id]_[date]_[timestamp].txt</code>.</p>
<p>All logfiles are csv files. Note that the timestamps are relative to the start of the experiment. The experiment starts
at timestamp 0.</p>
<h2>Run the experiment with an eye-tracker</h2>
<p>In order to run the experiment with an actual eye-tracker you can tick the respective box in the GUI in the lab settings
section. The box <code>Dummy version</code> should be <strong>un-ticked</strong>.</p>
<p>Depending on what eye-tracker you intend to use you need to install the software that comes with the eye-tracker. For
EyeLink and tobii you can download the software online for free.</p>
<h3>Develop and run experiments for EyeLink</h3>
<p>The code has been tested with EyeLink eye-trackers and mostly on a Windows presentation PC. However, MacOS should work
as well, but it has not been tested as thoroughly.
You will need to install <code>pylink</code> a package provided by SR Research if you use EyeLink eye-trackers.
Note that using pip to install pylink installs a different package although the names are the same! You have to follow
these step-by-step instructions
of how to install <code>pylink</code> can be found here: <a href="guidelines/html/INSTALL_PYLINK.html">INSTALL_PYLINK.html</a></p>
<h3>Develop and run experiments for Tobii</h3>
<p>An early version of the experiment has been tested with tobii eye-trackers. However, the code is not yet fully developed
and tested as the experiment as been developed further since then. If you want to use a tobii eye-tracker, you definitively
need to follow the following steps. Once those are completed, it will still be necessary to adjust the code in order to
work with the tobii eye-trackers:</p>
<ol>
<li>Install Tobii Pro SDK: <a href="https://connect.tobii.com/s/sdk-downloads?language=en_US">link</a></li>
<li>Download the SDK</li>
<li>Unzip the folder and copy all files from either the '32' or '64' folder to the experiment_implementation folder</li>
<li>Then you can pip install the package: <code>pip install tobii_research</code></li>
</ol>
<h3>Develop and run experiments for other eye-trackers</h3>
<p>Depending on what is needed we can add more eye-trackers. There is also a team that is trying to set up experiment
using a webcam. Please contact <a href="mailto:multipleye@cl.uzh.ch">multipleye@cl.uzh.ch</a> for more information.</p>
